<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">

<!-- ===========================Prototype index page  =========================== -->

<div th:fragment="prototype-add-users(addUserType)">
    <table class="extra-margin" th:id="${addUserType+'-table'}" style="display: none">
        <thead class="govuk-table__head">
            <tr class="govuk-table__row">
                <th scope="col" th:id="${addUserType + '-name'}">Name</th>
                <th scope="col" th:id="${addUserType + '-email'}">E-mail</th>
                <th class="govuk-table__header" scope="col">&nbsp;</th>
            </tr>
        </thead>
        <tbody class="govuk-table__body">
            <tr class="govuk-table__row">
                <td class="govuk-table__cell">
                    <input type="text" th:name="${'name-'+ addUserType +'1'}" th:id="${'name-'+ addUserType +'1'}" class="govuk-input width-full" aria-labelledby="user-name" value="" />
                </td>
                <td class="govuk-table__cell">
                    <input type="email" th:name="${'email-'+ addUserType +'1'}" th:id="${'email-'+ addUserType +'1'}" class="govuk-input width-full" aria-labelledby="user-email" value="" />
                </td>
                <td class="govuk-table__cell alignright">
                    <button class="button-clear govuk-!-margin-bottom-0" th:id="${'invite-' +addUserType}">Invite to project</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- ===========================Project setup select address=========================== -->

<div th:fragment="prototype-select-address">
    <fieldset class="govuk-fieldset">
        <legend class="govuk-visually-hidden">Operating address</legend>
        <div class="multiple-choice">
            <input id="address-use-org" type="radio" name="project-address-group" value="address-use-org" />
            <label class="block-label selection-button-radio" for="address-use-org">
                Use organisation address (<strong>BS1 4NT</strong>)
            </label>
        </div>
        <div class="multiple-choice">
            <input id="address-use-operating" type="radio" name="project-address-group" value="address-use-operating" />
            <label class="block-label selection-button-radio" for="address-use-operating">
                Use operating address (<strong>SN1 2UE</strong>)
            </label>
        </div>
        <div class="multiple-choice">
            <input id="address-add-project" type="radio" name="project-address-group" value="address-add-project" />
            <label class="block-label selection-button-radio" for="address-add-project">
                Enter an alternative address
            </label>
        </div>
    </fieldset>

    <div id="selected-address" class="panel extra-margin" style="display: none;">
        <h3 class="govuk-heading-m govuk-!-margin-top-0" th:text="${(address != null and address == 'bankDetails' ? 'Confirm organisation address' : 'Confirm project location')}">LOCATION TITLE</h3>
        <p class="govuk-body"><span class="street">Street</span> <br />
            <span class="street2"></span> <br />
            <span class="street3"></span> <br />
            <span class="town">Town</span><br />
            <span class="county">County</span><br />
            <span class="postcode">Postcode</span>
        </p>
    </div>


    <div class="govuk-form-group extra-margin" id="postcode-block" style="display: none;">
        <label class="govuk-label" for="postcode-check">
            <span class="govuk-label">Postcode</span>
        </label>
        <input class="govuk-input govuk-input--width-10" id="postcode-check" name="postcode-check" type="text" />
        <button type="submit" id="postcode-lookup" class="govuk-button">Find UK address</button>
        <div>
            <a href="#" id="enter-address-manually">Enter address manually</a>
        </div>
    </div>


    <div class="govuk-form-group" id="select-address-block" style="display: none">
        <label class="govuk-label" for="select-address">
            <span class="govuk-label">Select your address</span>
        </label>
        <select class="govuk-select" id="select-address" name="select-address">
            <option value="">SN1 2BD, 1, Station Road, Swindon </option>
            <option value="">SN1 2BD, 1A, Station Road, Swindon  </option>
            <option value="">SN1 2BD, 2, Station Road, Swindon </option>
            <option value="">SN1 2BD, 3, Station Road, Swindon </option>
            <option value="">SN1 2BD, 4, Station Road, Swindon </option>
            <option value="">SN1 2BD, 5, Station Road, Swindon </option>
        </select>
    </div>

    <th:block th:insert="prototypes/fragments/project-setup :: prototype-manual-address" />

</div>

<!-- ===========================Bank account details=========================== -->
<div th:fragment="prototype-manual-address">
    <fieldset id="address-details" class="govuk-fieldset extra-margin" th:style="${(user=='internal'?'display: block':'display: none')}">
        <legend class="govuk-visually-hidden">Address details</legend>
        <div class="govuk-form-group">
            <label class="govuk-label" for="street">
                <span class="govuk-label">Street</span>
            </label>
            <input class="govuk-input street" id="street" name="street" type="text" th:value="${(param.edit == null ? '':'4 Station Road')}"/>
        </div>
        <div class="govuk-form-group">
            <label class="govuk-label govuk-visually-hidden" for="street-2">
                <span class="govuk-label">Street line 2</span>
            </label>
            <input class="govuk-input street-2" id="street-2" name="street-2" type="text" />
        </div>
        <div class="govuk-form-group">
            <label class="govuk-label" for="street-2">
                <span class="govuk-label govuk-visually-hidden">Street line 3</span>
            </label>
            <input class="govuk-input street-3" id="street-3" name="street-2" type="text" />
        </div>
        <div class="govuk-form-group">
            <label class="govuk-label" for="town">
                <span class="govuk-label">Town</span>
            </label>
            <input class="govuk-input town" id="town" name="town" type="text" th:value="${(param.edit == null ? '':'Swindon')}" />
        </div>
        <div class="govuk-form-group">
            <label class="govuk-label" for="county">
                <span class="govuk-label">County</span>
            </label>
            <input class="govuk-input county" id="county" name="county" type="text" th:value="${(param.edit == null ? '':'Wiltshire')}" />
        </div>
        <div class="govuk-form-group">
            <label class="govuk-label" for="postcode">
                <span class="govuk-label">Postcode</span>
            </label>
            <input class="govuk-input postcode" id="postcode" name="postcode" type="text" th:value="${(param.edit == null ? '':'SN1 2BD')}" />
        </div>
    </fieldset>
</div>


<!-- ===========================Bank account details=========================== -->

<div th:fragment="prototype-bank-details">

    <fieldset th:unless="${user == null}" class="govuk-fieldset">

        <h2 class="govuk-heading-m govuk-!-margin-bottom-0">Company details</h2>

        <legend class="govuk-visually-hidden">Company details</legend>

        <div class="govuk-form-group extra-margin">
            <label class="govuk-label" for="company-name">
                <span class="govuk-label">Company name</span>
            </label>
            <input class="govuk-input" id="company-name" name="company-name" value="Aptrans Ltd" type="text" />
        </div>

        <th:block th:unless="${param.status != null and param.status[0] == 'noCompHouse'}">
            <div class="govuk-form-group">
                <label class="govuk-label" for="companies-house-number">
                    <span class="govuk-label">Companies House number</span>
                </label>
                <p class="govuk-hint">For example: 1548965</p>
                <input class="govuk-input" id="companies-house-number" name="companies-house-number" value="6567388" type="text" />
            </div>
        </th:block>

    </fieldset>

    <fieldset class="govuk-fieldset">
        <h2 class="govuk-heading-m govuk-!-margin-bottom-0">Account details</h2>

        <legend class="govuk-visually-hidden">Account details</legend>

        <p class="govuk-hint" th:unless="${user == 'internal'}">Please enter the bank account that you wish to use to receive the grant.</p>

        <p class="govuk-hint" th:unless="${user == null}">This is the bank account that the applicant will use for the duration of the project</p>

        <div class="govuk-form-group extra-margin">
            <label class="govuk-label" for="bank-acc-number">
                <span class="govuk-label">Account number</span>
            </label>
            <p class="govuk-hint">For example: 1548965</p>
            <input class="govuk-input" id="bank-acc-number" name="bank-acc-number" value="" type="text" />
        </div>

        <div class="govuk-form-group ">
            <label class="govuk-label" for="bank-sort-code">
                <span class="govuk-label">Sort code</span>
            </label>
            <p class="govuk-hint">For example: 311212</p>
            <input class="govuk-input govuk-input--width-10" id="bank-sort-code" name="bank-sort-code" value="" type="text" />
        </div>

        <h2 class="govuk-heading-m govuk-!-margin-bottom-0">Billing address</h2>

        <p class="govuk-hint">This is the billing address connected to this bank account. This is not the address of the bank.</p>

        <th:block th:insert="prototypes/fragments/project-setup :: prototype-select-address" th:with="address='bankDetails'"  th:unless="${user == 'internal'}"/>

    </fieldset>
</div>


<!-- ===========================Spend profile rows readonly=========================== -->

<div th:fragment="prototype-spend-row">
    <tr th:class="${(spend == 'high' ? 'error-in-row' : 'spend-ok')}">

        <th:block th:if="${type == null}">
            <th scope="row" th:text="${header}" th:id="${#strings.substringBefore(header, ' ')}" class="fix-left">HEADER HERE</th>
        </th:block>

        <th:block th:if="${type != null}">
            <th scope="row" th:id="${#strings.substringBefore(header, ' ')}" class="fix-left">
                <span th:text="${header}">HEADER HERE</span>
                <small th:text="${type}">TYPE</small>
            </th>
        </th:block>

        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}" class="separate-cell year">12,500</td>

        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}" class="separate-cell year">12,500</td>

        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}" class="separate-cell year">12,500</td>

        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>

        <td th:text="${total}" class="total fix-right2">450,000</td>
        <td th:text="${total}" class="total eligible fix-right">450,000</td>
    </tr>
</div>

<!-- ===========================Spend profile rows inputs=========================== -->

<div th:fragment="prototype-spend-row-edit">
    <tr th:class="${(spend == 'high' ? 'error-in-row' : 'spend-ok')}">
        <th scope="row" th:text="${header}" th:id="${#strings.substringBefore(header, ' ')}" class="fix-left">Labour</th>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month1'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month2'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month3'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month4'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month5'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month6'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month7'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month8'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month9'}"/></td>
        <td class="separate-cell year"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month10'}"/></td>

        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month11'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month12'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month13'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month14'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month15'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month16'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month17'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month18'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month19'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month20'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month21'}"/></td>
        <td class="separate-cell year"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month22'}"/></td>

        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month23'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month24'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month25'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month26'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month27'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month28'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month29'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month30'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month31'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month32'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month33'}"/></td>
        <td class="separate-cell year"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month34'}"/></td>

        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month35'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month36'}"/></td>

        <td th:text="${total}" class="total fix-right2">450,000</td>
        <td th:text="${total}" class="total eligible fix-right">450,000</td>
    </tr>
</div>


<!-- ===========================Spend profile ACADEMIC rows readonly=========================== -->

<div th:fragment="prototype-spend-academic-row">
    <tr th:class="${border != null ? 'cell-border-bottom-divide' : ''}" th:classappend="${(spend == 'high' ? 'error-in-row' : 'spend-ok')}">
        <th th:text="${section}" class="fix-left1">Directly Incurred</th>
        <th scope="row" th:text="${header}" th:id="${#strings.substringBefore(header, ' ')}" class="fix-left2">Staff</th>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}" class="separate-cell year">12,500</td>

        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}" class="separate-cell year">12,500</td>

        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>
        <td th:text="${value}" class="separate-cell year">12,500</td>

        <td th:text="${value}">12,500</td>
        <td th:text="${value}">12,500</td>

        <td th:text="${total}" class="total fix-right2">450,000</td>
        <td th:text="${total}" class="total eligible fix-right">450,000</td>
    </tr>
</div>

<!-- ===========================Spend profile academic rows inputs=========================== -->

<div th:fragment="prototype-spend-academic-row-edit">
    <tr th:class="${border != null ? 'cell-border-bottom-divide' : ''}" th:classappend="${(spend == 'high' ? 'error-in-row' : 'spend-ok')}">
        <th th:text="${section}" class="fix-left1">Directly Incurred</th>
        <th scope="row" th:text="${header}" th:id="${#strings.substringBefore(header, ' ')}" class="fix-left2">Staff</th>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month1'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month2'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month3'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month4'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month5'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month6'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month7'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month8'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month9'}"/></td>
        <td class="separate-cell year"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month10'}"/></td>

        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month11'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month12'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month13'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month14'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month15'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month16'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month17'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month18'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month19'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month20'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month21'}"/></td>
        <td class="separate-cell year"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month22'}"/></td>

        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month23'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month24'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month25'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month26'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month27'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month28'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month29'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month30'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month31'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month32'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month33'}"/></td>
        <td class="separate-cell year"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month34'}"/></td>

        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month35'}"/></td>
        <td class="govuk-table__cell"><input type="text" th:value="${value}" class="govuk-input" th:attr="aria-labelledby=${#strings.substringBefore(header, ' ')+ ' month36'}"/></td>

        <td th:text="${total}" class="total fix-right2">450,000</td>
        <td th:text="${total}" class="total eligible fix-right">450,000</td>
    </tr>
</div>

<!-- ===========================Messages / Queries  / notes=========================== -->

<div th:fragment="prototype-post-query(queryType, user)">

    <div class="govuk-grid-row extra-margin-top">
      <div class="govuk-grid-column-one-half">
        <a th:href="${#httpServletRequest.requestURI + '?action=newQuery'}" id="post-new-query" th:unless="${param.action != null and param.action[0] == 'newQuery' or user == 'partner'}" class="govuk-button button-large" th:text="${(queryType == 'query' ? 'Post a new query' : 'Create a new note')}">QUERY TYPE</a>
      </div>
      <div class="govuk-grid-column-one-half">
        <fieldset th:unless="${queryType == 'note' or user == 'partner'}" class="govuk-fieldset">

           <div class="govuk-form-group alignright">
               <label for="querySection">Query section</label>
               <select class="govuk-select">
                   <th:block th:if="${param.section != null}">
                     <option th:text="${#httpServletRequest.getParameter('section')}" th:value="${#httpServletRequest.getParameter('section')}"></option>
                   </th:block>
                   <option value="All">All</option>
                   <option value="Viability">Viability</option>
                   <option value="Eligibility">Eligibility</option>
                   <option value="Other">Other</option>
               </select>
           </div>
       </fieldset>
      </div>
    </div>

    <th:block th:if="${param.action != null and param.action[0] == 'newQuery'}" th:unless="${user == 'partner'}" >

        <form class="extra-margin" th:action="@{${#httpServletRequest.requestURI}}" method="get">

            <fieldset class="govuk-fieldset">

                <th:block th:if="${queryType == 'query'}">

                    <legend class="govuk-heading-m">Post new query</legend>

                    <div class="govuk-form-group">
                        <label for="queryTitle" class="govuk-label">Title</label>
                        <input name="queryTitle" id="queryTitle"  class="width-full" required="required" />
                    </div>

                    <div class="govuk-form-group">
                        <label for="section" class="govuk-label">Section</label>
                        <select name="section" id="section" class="govuk-select">
                            <option value="Viability">Viability</option>
                            <option value="Eligibility">Eligibility</option>
                        </select>
                    </div>

                    <div class="govuk-form-group">
                        <label for="query" class="govuk-label">Query</label>
                        <textarea name="query" id="query" cols="30" rows="10" class="width-full" required="required"></textarea>
                        <div class="count-label alignright">
                            <small>
                                <span class="count-message">Words remaining:</span>
                                <span class="count-down positive" aria-live="polite">400</span>
                            </small>
                        </div>
                    </div>

                </th:block>


                <th:block th:if="${queryType == 'note'}">

                    <legend class="govuk-heading-m">New note</legend>

                    <div class="govuk-form-group">
                        <label for="noteTitle" class="govuk-label">Title</label>
                        <input name="noteTitle" id="noteTitle"  class="width-full" required="required" />
                    </div>


                    <div class="govuk-form-group">
                        <label for="noteDetails" class="govuk-label">Note</label>
                        <textarea name="noteDetails" id="query" cols="30" rows="10" class="width-full" required="required"></textarea>
                        <div class="count-label alignright">
                            <small>
                                <span class="count-message">Words remaining:</span>
                                <span class="count-down positive" aria-live="polite">400</span>
                            </small>
                        </div>
                    </div>

                </th:block>

            </fieldset>

            <fieldset class="govuk-fieldset">
                <div class="upload-section unstyled-view">
                    <legend class="govuk-heading-s govuk-!-margin-0">Upload supporting documentation</legend>

                    <input type="file" name="file" id="file" class="inputfile" />
                    <label for="file" class="button-secondary extra-margin">+ Upload</label>
                </div>
            </fieldset>

            <a href="#">Attach another file</a>

            <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible" />

            <input type="hidden" id="action" name="action" th:value="${(queryType == 'query' ? 'postQuery' : 'saveNote')}" />

            <div class="govuk-grid-row">
                <div class="govuk-grid-column-one-half"><button class="govuk-button button-large govuk-!-margin-0" th:text="${(queryType == 'query' ? 'Post Query' : 'Save note')}">Save note</button></div>
                <div class="govuk-grid-column-one-half alignright"><a th:href="${#httpServletRequest.requestURI + '?action=cancelQuery'}">Cancel</a></div>

            </div>
        </form>

    </th:block>



    <th:block th:if="${param.action != null and param.action[0] == 'postQuery' or param.action != null and param.action[0] == 'showResponse' or param.action != null and param.action[0] == 'newResponse' or param.action != null and param.action[0] == 'postResponse'}" th:unless="${user == 'partner'}" >
        <th:block th:if="${queryType == 'query'}">

            <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible" />

            <h2 class="govuk-heading-m govuk-!-margin-bottom-0" th:utext="${#strings.replace( #strings.escapeXml( #httpServletRequest.getParameter('queryTitle') ),T(java.lang.System).getProperty('line.separator'),'&lt;br /&gt;')}">QUERY TITLE</h2>

            <h3 class="govuk-heading-s govuk-!-margin-0" th:text="${(param.section != null ? param.section[0] : 'NOT SET')}">SECTION TITLE</h3>

            <p class="govuk-heading-s govuk-!-margin-top-0">Innovate UK - Finance team <small>26/06/2016 17:55</small></p>

            <div th:utext="${#strings.replace( #strings.escapeXml( #httpServletRequest.getParameter('query') ),T(java.lang.System).getProperty('line.separator'),'&lt;br /&gt;')}">QUERY
            </div>

            <form method="get" th:action="${#httpServletRequest.requestURI}">
                <input type="hidden" id="queryTitle" name="queryTitle" th:value="${#httpServletRequest.getParameter('queryTitle')}" />
                <input type="hidden" id="section" name="section" th:value="${#httpServletRequest.getParameter('section')}" />
                <input type="hidden" id="query" name="query" th:value="${#httpServletRequest.getParameter('query')}" />
                <input type="hidden" id="action" name="action" value="showResponse" />
                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible" />
                <button>Show example response from the applicant</button>
            </form>
        </th:block>

        <!-- <th:block th:if="${queryType == 'note'}">
            <div class="govuk-body panel">
                <p class="govuk-heading-s govuk-!-margin-top-0">Francis Delt - Finance team <small>27/06/2015 09:40</small></p>
                <p class="govuk-body">I think I have found the document (attached) showing that they have done this before.</p>

                <h4 class="govuk-heading-s">Supporting document</h4>
                <p class="govuk-body"><a href="#">Report1.doc</a></p>
            </div>
        </th:block> -->

    </th:block>



  <!--  <th:block th:if="${param.action != null and param.action[0] == 'saveNote' or param.action != null and param.action[0] == 'newResponse'}" th:unless="${user == 'partner'}">

        <h2 class="govuk-heading-m govuk-!-margin-bottom-0" th:utext="${#strings.replace( #strings.escapeXml( #httpServletRequest.getParameter('noteTitle') ),T(java.lang.System).getProperty('line.separator'),'&lt;br /&gt;')}" th:unless="${param.noteTitle == null}"></h2>

        <h2 class="govuk-heading-m govuk-!-margin-bottom-0" th:unless="${param.noteTitle != null}">Administrative support costs</h2>

        <p class="govuk-heading-s">Paul Deldt ABC - Finance team <small>27/06/2015 09:40</small></p>

        <p th:utext="${#strings.replace( #strings.escapeXml( #httpServletRequest.getParameter('noteDetails') ),T(java.lang.System).getProperty('line.separator'),'&lt;br /&gt;')}" th:unless="${param.noteDetails == null}"></p>

        <p class="govuk-body" th:unless="${param.noteDetails != null}">Need to look into why the admin support costs are so high, surely they could be lower for a company of this type.</p>


    </th:block> -->

    <th:block th:if="${param.action != null and param.action[0] == 'showResponse' or param.action != null and param.action[0] == 'postResponse' or param.action != null and param.action[0] == 'Response' or param.action != null and param.action[0] == 'newResponse'}">

        <div class="govuk-body panel" th:unless="${queryType == 'note' or user == 'partner'}">
            <p class="govuk-body"><strong>Steve Smith - Aptrans Ltd </strong> <small th:text="${#dates.format(#dates.createNow(), 'dd MMM yyyy HH:mm')}">26/06/2016 18:23</small></p>
            <p class="govuk-body">We have always used Francois. He is related to the director of the company. &pound;150k equates to 150 days.</p>
        </div>

    </th:block>

    <th:block th:if="${param.action != null and param.action[0] == 'saveNote' or param.action != null and param.action[0] == 'saveNote' or param.action != null and param.action[0] == 'newResponse' or param.action != null and param.action[0] == 'postResponse'}" th:unless="${queryType == 'query'}">
        <div class="extra-margin">

            <h2 class="govuk-heading-m govuk-!-margin-top-0" th:utext="${#strings.replace( #strings.escapeXml( #httpServletRequest.getParameter('noteTitle') ),T(java.lang.System).getProperty('line.separator'),'&lt;br /&gt;')}" th:unless="${param.noteTitle == null}"></h2>

            <p class="govuk-heading-s govuk-!-margin-0">Paul Deldt - Finance team <small>27/06/2015 09:40</small></p>

            <p th:utext="${#strings.replace( #strings.escapeXml( #httpServletRequest.getParameter('noteDetails') ),T(java.lang.System).getProperty('line.separator'),'&lt;br /&gt;')}" th:unless="${param.noteDetails == null}"></p>

        </div>
    </th:block>


    <th:block th:if="${param.action != null and param.action[0] == 'showResponse' or param.action != null and param.action[0] == 'postResponse' or param.action != null and param.action[0] == 'Response'}">

        <div class="govuk-body panel" th:if="${param.action != null and param.action[0] == 'postResponse'}">

            <th:block th:if="${user == 'admin'}">
                <p class="govuk-body govuk-!-margin-0"><strong>Innovate UK - Finance team </strong> <small th:text="${#dates.format(#dates.createNow(), 'dd MMM yyyy HH:mm')}">26/06/2016 18:23</small></p>
            </th:block>

            <th:block th:if="${user == 'partner'}">
                <p class="govuk-body govuk-!-margin-0"><strong>Steve Smith - Aptrans Ltd </strong> <small th:text="${#dates.format(#dates.createNow(), 'dd MMM yyyy HH:mm')}">26/06/2016 18:23</small></p>
            </th:block>

            <div th:utext="${#strings.replace( #strings.escapeXml( #httpServletRequest.getParameter('response') ),T(java.lang.System).getProperty('line.separator'),'&lt;br /&gt;')}">
        </div>
            <h4 class="govuk-heading-s">Supporting document</h4>
            <p class="govuk-body"><a href="#">Report1.doc</a></p>
        </div>

        <form method="get" th:action="${#httpServletRequest.requestURI}" th:unless="${queryType == 'note'}">
            <input type="hidden" id="section" name="section" th:value="${#httpServletRequest.getParameter('section')}" />
            <input type="hidden" id="query" name="query" th:value="${#httpServletRequest.getParameter('query')}" />
            <input type="hidden" id="queryTitle" name="queryTitle" th:value="${#httpServletRequest.getParameter('queryTitle')}" />
            <input type="hidden" id="action" name="action" value="newResponse" />
            <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible" />
            <button class="govuk-button button-secondary">Respond</button>
        </form>

    </th:block>


    <th:block th:if="${param.action != null and param.action[0] == 'newResponse'}">

        <form class="extra-margin" th:action="@{${#httpServletRequest.requestURI}}" method="get">

            <fieldset class="govuk-fieldset">

                <legend class="govuk-heading-m" th:text="${(queryType == 'query' ? 'Respond to query' : 'Comment')}">RESPOND TITLE</legend>

                <div class="govuk-form-group">
                    <label for="response" class="govuk-label" th:text="${(queryType == 'query' ? 'Response' : 'Add your comment')}">RESPONSE LABEL</label>
                    <textarea name="response" id="response" cols="30" rows="10" class="width-full" required="required"></textarea>
                    <div class="count-label alignright">
                        <small>
                            <span class="count-message">Words remaining:</span>
                            <span class="count-down positive" aria-live="polite">400</span>
                        </small>
                    </div>
                </div>

            </fieldset>

            <fieldset class="govuk-fieldset">
                <div class="upload-section unstyled-view">
                    <legend class="govuk-heading-s govuk-!-margin-0">Upload supporting documentation</legend>

                    <input type="file" name="file" id="file" class="inputfile" />
                    <label for="file" class="button-secondary extra-margin">+ Upload</label>
                </div>
            </fieldset>

            <th:block th:if="${queryType == 'query'}">
                <input type="hidden" id="section" name="section" th:value="${#httpServletRequest.getParameter('section')}" />
                <input type="hidden" id="query" name="query" th:value="${#httpServletRequest.getParameter('query')}" />
                <input type="hidden" id="queryTitle" name="queryTitle" th:value="${#httpServletRequest.getParameter('queryTitle')}" />
            </th:block>

            <th:block th:if="${queryType == 'note'}">
                <input type="hidden" id="noteTitle" name="noteTitle" th:value="${#httpServletRequest.getParameter('noteTitle')}" />
                <input type="hidden" id="noteDetails" name="noteDetails" th:value="${#httpServletRequest.getParameter('noteDetails')}" />
            </th:block>


            <input type="hidden" id="action" name="action" value="postResponse" />

            <div class="govuk-grid-row extra-margin">
                <div class="govuk-grid-column-one-half"><button class="govuk-button button-large govuk-!-margin-0" th:text="${(queryType == 'query' ? 'Post response' : 'Save comment')}">Post response</button></div>
                <div class="govuk-grid-column-one-half alignright"><a th:href="${#httpServletRequest.requestURI}">Cancel</a></div>

            </div>
        </form>

    </th:block>

    <th:block th:if="${queryType == 'note' and param.action != null and param.action[0] == 'saveNote'}">

        <form method="get" th:action="${#httpServletRequest.requestURI}">
            <input type="hidden" id="noteTitle" name="noteTitle" th:value="${#httpServletRequest.getParameter('noteTitle')}" />
            <input type="hidden" id="noteDetails" name="noteDetails" th:value="${#httpServletRequest.getParameter('noteDetails')}" />
            <input type="hidden" id="action" name="action" value="newResponse" />
            <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible" />
            <button class="govuk-button button-secondary">Comment</button>
        </form>

    </th:block>

</div>

</html>
