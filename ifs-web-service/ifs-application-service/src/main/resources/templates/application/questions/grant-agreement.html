<!DOCTYPE html>
<html lang="en" class="govuk-template" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <th:block th:insert="fragments/layout :: head" th:with="pageTitle='Horizon 2020 grant agreement'" />
</head>
<body class="govuk-template__body application">
<th:block th:insert="fragments/layout :: body-start" />
<th:block th:insert="fragments/layout :: global-header" />

<div class="govuk-width-container">
    <th:block th:insert="fragments/layout :: phase-banner" />

    <th:block th:insert="fragments/layout :: header-sub"
              th:with="linkTitle='Application overview',linkClass='link-back',linkUrl=@{/application/{applicationId}(applicationId=${model.applicationId})}" />

    <main class="govuk-main-wrapper" id="main-content" role="main">

        <div th:if="${#fields.hasErrors('${form.*}')}" class="govuk-error-summary"
             aria-labelledby="error-summary-title"
             role="alert"
             tabindex="-1"
             data-module="error-summary">
            <h2 class="govuk-error-summary__title" id="error-summary-title">There is a problem</h2>
            <th:block th:insert="fragments/elements :: error-summary-list(form)" />
        </div>

        <th:block th:insert="fragments/layout :: page-title"
                  th:with="pageTitle='Horizon 2020 grant agreement',subTitle=${model.applicationName},size='govuk-heading-xl'" />

        <form method="post" novalidate="novalidate">
            <div class="upload-section"
                 th:with="uploaded=false">
                <h2 class="govuk-heading-m">Upload your grant agreement</h2>
                <p class="govuk-body">Upload a PDF copy of your Horizon 2020 grant agreement letter. This was issued to you as confirmation of funding after your initial application.</p>
                <p class="govuk-body">Your EU reconciliation report will need approval from the EU. Once you have received this you will be asked to upload it as part of your project setup, which will be the second stage of this application process.</p>
                <div th:unless="${uploaded}">
                    <!--<th:block th:if="${#fields.hasErrors('grantAgreement')}">-->
                        <!--<span class="govuk-error-message" th:each="err : ${#fields.errors('grantAgreement')}" th:text="${err}" />-->
                    <!--</th:block>-->
                    <p class="govuk-body uploaded-file">No file currently uploaded.</p>
                    <input type="file" id="grant-agreement" name="grantAgreement" class="inputfile">
                    <label for="grant-agreement" class="button-secondary govuk-!-margin-top-6">+ Upload</label>
                    <button name="uploadGrantAgreement" class="button-secondary" data-for-file-upload="grantAgreement"></button>
                </div>
                <div th:if="${uploaded}">
                    <p class="govuk-body uploaded-file">
                        <a th:href="@{/application/{applicationId}/grant-agreement/download-grant-agreement(applicationId=${model.applicationId})}"
                           th:text="test.pdf"
                           target="_blank"
                           class="govuk-link">File</a>
                        (opens in a new window).</p>
                    <button name="removeResponse" class="button-secondary">Remove</button>
                </div>
            </div>
            <button type="submit"
                    class="govuk-button">Save and return to registration overview
            </button>
        </form>
        <th:block th:insert="fragments/layout :: main-content-end" />
    </main>
</div>
<th:block th:insert="fragments/layout :: footer" />
<th:block th:insert="fragments/layout :: body-end" />
<th:block th:insert="fragments/service-layout :: body-end" />
</body>
</html>
