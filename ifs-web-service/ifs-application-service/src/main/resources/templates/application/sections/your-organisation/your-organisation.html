<!DOCTYPE html>
<html lang="en" class="govuk-template" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <th:block th:insert="fragments/layout :: head" th:with="pageTitle='Your organisation'" />
</head>
<body class="govuk-template__body your-organisation">
<th:block th:insert="fragments/layout :: body-start" />
<th:block th:insert="fragments/layout :: global-header" />

<div class="govuk-width-container">
    <th:block th:insert="fragments/layout :: phase-banner" />

    <th:block th:insert="fragments/layout :: header-sub"
              th:with="linkTitle='Your finances',linkClass='link-back',linkUrl=${model.financesUrl}" />

    <main class="govuk-main-wrapper" id="main-content" role="main">

        <div th:if="${#fields.hasErrors('${form.*}')}" class="govuk-error-summary"
             aria-labelledby="error-summary-title"
             role="alert"
             tabindex="-1"
             data-module="error-summary">
            <h2 class="govuk-error-summary__title" id="error-summary-title">There is a problem on this page.</h2>
            <th:block th:insert="fragments/elements :: error-summary-list(form)" />
        </div>

        <th:block th:insert="fragments/layout :: page-title"
                  th:with="pageTitle='Your organisation',subTitle=${model.applicationName},size='govuk-heading-xl'" />

        <form th:object="${form}"
              th:action="@{${#ifsUtil.formPostUri(#httpServletRequest)}}"
              th:attr="data-autosave='autosaveFormPost'"
              enctype="multipart/form-data"
              novalidate="novalidate"
              method="POST">

            <button class="hidden-save" type="submit" tabindex="-1" aria-hidden="true">Save</button>
            <input type="hidden" id="cacheTest" value=""/>

            <th:block th:if="${!model.readOnly}" >

                <div class="govuk-form-group">
                    <fieldset class="govuk-fieldset">
                        <legend class="govuk-fieldset__legend govuk-fieldset__legend--s" id="organisationSize">Size</legend>

                        <span class="govuk-hint">To determine the level of funding you are eligible to receive please provide your business size using the
                        <a href="http://ec.europa.eu/growth/smes/business-friendly-environment/sme-definition/index_en.htm" target="_blank">
                            EU definition (opens in a new window)</a> for guidance.</span>

                        <div class="govuk-radios">
                            <div class="govuk-radios__item" th:each="organisationSizeOption : ${model.organisationSizeOptions}">
                                <input type="radio"
                                       class="govuk-radios__input"
                                       th:id="${'organisationSize-' + organisationSizeOption.name()}"
                                       name="organisationSize"
                                       th:value="${organisationSizeOption.name()}"
                                       required="required" data-required-errormessage="Please enter your organisation size."/>
                                <label th:for="${'organisationSize-' + organisationSizeOption.name()}"
                                       th:text="${organisationSizeOption.description}"
                                       class="govuk-label govuk-radios__label">Micro or small</label>
                            </div>
                        </div>

                    </fieldset>
                </div>

                <div class="govuk-form-group">
                    <label class="govuk-label--s"
                           for="formInput[1443]"
                           id="form-label-1443">Turnover (£)</label>

                    <span class="govuk-hint">Your turnover from the last financial year.</span>

                    <input class="govuk-input govuk-input--width-10"
                           id="formInput[1443]"
                           name="formInput[1443]"
                           value=""
                           pattern="[0-9]"
                           data-prevent-input-regex="[^0-9]"
                           required="required"
                           min="0"
                           type="number" />
                </div>

                <div class="govuk-form-group">
                    <label class="govuk-label--s"
                           for="formInput[1444]"
                           id="form-label-1444">Full time employees</label>

                    <span class="govuk-hint">Number of full time employees at your organisation.</span>

                    <input class="govuk-input govuk-input--width-10"
                           type="number"
                           id="formInput[1444]"
                           name="formInput[1444]"
                           pattern="[0-9]"
                           data-prevent-input-regex="[^0-9]"
                           min="0"
                           max="2147483647"
                           value=""
                           required="required" />
                </div>

                <div class="agree-to-terms-container">
                    <div class="govuk-form-group">
                        <fieldset class="govuk-fieldset">
                            <legend class="govuk-fieldset__legend govuk-fieldset__legend--m govuk-visually-hidden">
                                <h2 class="govuk-fieldset__heading">Terms and conditions</h2>
                            </legend>

                            <div class="govuk-checkboxes">
                                <div class="govuk-checkboxes__item">
                                    <input id="agree-state-aid"
                                           class="govuk-checkboxes__input"
                                           type="checkbox"
                                           value="true"
                                           data-switches-button-status="#mark-all-as-complete"
                                           data-autosave-disabled name="stateAidAgreed" /><input type="hidden" name="_stateAidAgreed" value="on"/>
                                    <label for="agree-state-aid"
                                           class="govuk-label govuk-checkboxes__label">
                                        I confirm that by submitting my application my organisation will be <a href="https://www.gov.uk/guidance/innovate-uk-funding-general-guidance-for-applicants#state-aid" target="_blank" class="govuk-link">eligible for state aid</a> (opens in a new window) within 90 days of any offer being made.
                                    </label>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>

            </th:block>

            <th:block th:if="${model.complete}">

                <dl class="govuk-list readonly-data">
                    <dt>Size</dt>
                    <dd>Medium</dd>
                </dl>

                <dl class="govuk-list readonly-data">
                    <dt>Turnover (£)</dt>
                    <dd>&pound;1</dd>
                </dl>

                <dl class="govuk-list readonly-data">
                    <dt>Full time employees</dt>
                    <dd>1</dd>
                </dl>

            </th:block>

            <div class="message-alert">
                <p class="govuk-body">If you are found to be ineligible for state aid, we have the right to withdraw any offer.</p>
            </div>

            <div class="form-footer" th:if="${model.open}">
                <div class="form-footer__actions">
                    <button id="mark_as_complete" th:unless="${model.readOnly}" type="submit" name="mark-as-complete"
                            class="button-clear" value="true">Mark as complete
                    </button>
                    <button id="mark_as_incomplete" th:if="${model.complete}" type="submit" name="mark-as-incomplete" class="button-clear" value="true"
                            th:text="${'Edit your organisation'}">Edit
                    </button>
                </div>
            </div>

            <div>
                <a th:href="${model.financesUrl}"
                   th:if="${model.readOnly}"
                   class="govuk-!-margin-top-6 button-secondary">Return to finances
                </a>
                <button type="submit" th:unless="${model.readOnly}"
                        class="govuk-!-margin-top-6 govuk-button">
                    Save and return to finances
                </button>
            </div>
        </form>

        <th:block th:insert="fragments/layout :: main-content-end" />
    </main>
</div>
<th:block th:insert="fragments/layout :: footer" />
<th:block th:insert="fragments/layout :: body-end" />
<th:block th:insert="fragments/service-layout :: body-end" />
</body>
</html>
