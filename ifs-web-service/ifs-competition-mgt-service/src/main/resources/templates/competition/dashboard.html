<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">

<div th:fragment="comp-dashboard-header(searchQuery)">
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-one-half">
            <th:block th:insert="fragments/layout :: page-title"
                      th:with="pageTitle=${setPageTitle == null ? 'All competitions' : setPageTitle},size='govuk-heading-l'" />
        </div>
        <div class="govuk-grid-column-one-half alignright">
            <div class="form-search" th:if="${showSearch == null || showSearch == true}">
                <label class="govuk-visually-hidden" for="searchQuery">Search for:</label>
                <input th:type="${searchType == 'applications' ? 'number' : 'text'}"
                       th:value="${searchQuery}"
                       th:name="${searchType == 'applications' ? 'searchString' : 'searchQuery'}"
                       id="searchQuery"
                       class="search-query"
                       th:placeholder="${searchType == 'applications' ? 'Search applications' : 'Search competitions'}"/>
                <input type="submit" id="searchsubmit" value="Search" class="btn"/>
            </div>
        </div>
    </div>
</div>

<div th:fragment="comp-dashboard-navigation(selectedTab, counts, tabs)">
    <ul class="govuk-list inline-nav cf">
        <li id="section-1" th:class="${selectedTab == 'live' ? 'selected' : ''}" th:if="${tabs.live()}">
            <a th:href="@{'/dashboard/live'}" th:text="'Live ('+${counts.liveCount}+')'" class="govuk-link"></a>
        </li>

        <li id="section-2" th:class="${selectedTab == 'upcoming' ? 'selected' : ''}" th:if="${tabs.upcoming()}">
            <a th:href="@{'/dashboard/upcoming'}" th:text="'Upcoming ('+${counts.upcomingCount}+')'" class="govuk-link"></a>
        </li>

        <li id="section-3" th:class="${selectedTab == 'non-ifs' ? 'selected' : ''}" th:if="${tabs.nonIFS()}">
            <a th:href="@{'/dashboard/non-ifs'}" th:text="'Non-IFS ('+${counts.nonIfsCount}+')'" class="govuk-link"></a>
        </li>

        <li id="section-4" th:class="${selectedTab == 'projectSetup' ? 'selected' : ''}" th:if="${tabs.projectSetup()}">
            <a th:href="@{'/dashboard/project-setup'}" th:text="'Project setup ('+${counts.projectSetupCount}+')'" class="govuk-link"></a>
        </li>

        <li id="section-5" th:class="${selectedTab == 'previous' ? 'selected' : ''}" th:if="${tabs.previous()}">
            <a th:href="@{'/dashboard/previous'}" th:text="'Previous ('+${counts.feedbackReleasedCount}+')'" class="govuk-link"></a>
        </li>
    </ul>
</div>

<div th:fragment="dashboard-row">
    <div class="govuk-grid-column-one-third">
        <h3 class="govuk-heading-s">
            <a th:href="@{'/non-ifs-competition/setup/'+${competition.id}}"
               th:if="${nonIfs}"
               class="govuk-link">
                <th:block th:insert="competition/dashboard :: competition-name" />
            </a>
            <th:block th:unless="${nonIfs}">
                <th:block th:if="${customLink}">
                    <a th:href="@{${customLink}}"
                       class="govuk-link">
                        <th:block th:insert="competition/dashboard :: competition-name" />
                    </a>
                </th:block>
                <th:block th:unless="${customLink}">
                    <th:block th:if="${projectSetup}">
                        <a th:href="${'/project-setup-management/competition/'+competition.id+'/status'}"
                           class="govuk-link">
                            <th:block th:insert="competition/dashboard :: competition-name" />
                        </a>
                    </th:block>
                    <th:block th:unless="${projectSetup}">
                        <a th:href="@{'/competition/setup/'+${competition.id}}"
                           th:if="${competition.competitionStatus == T(org.innovateuk.ifs.competition.resource.CompetitionStatus).COMPETITION_SETUP}"
                           class="govuk-link">
                            <th:block th:insert="competition/dashboard :: competition-name" />
                        </a>
                        <th:block th:if="${competition.competitionStatus.inFlight}">
                            <a th:href="@{${competition.topLevelNavigationLink}}"
                               class="govuk-link">
                                <th:block th:insert="competition/dashboard :: competition-name" />
                            </a>
                        </th:block>
                    </th:block>
                </th:block>
            </th:block>
        </h3>
    </div>
    <div class="govuk-grid-column-two-thirds">
        <div class="govuk-grid-column-one-third"><p class="govuk-body" th:text="${competition.competitionTypeName}"></p></div>
        <div class="govuk-grid-column-one-third">
            <p class="govuk-body" th:unless="${competition.innovationAreaNames.size() > 5}" th:text="${#strings.setJoin(competition.innovationAreaNames, ', ')}"></p>
            <p class="govuk-body" th:if="${competition.innovationAreaNames.size() > 5}">Multiple innovation areas</p>
        </div>
        <div class="govuk-grid-column-one-third"><p class="govuk-body" th:text="${cell4}"></p></div>
    </div>
</div>


<div th:fragment="competition-name">
    <th:block th:unless="${#strings.isEmpty(competition.name)}" th:text="${competition.name}"/>
    <th:block th:if="${#strings.isEmpty(competition.name)}" th:text="#{ifs.competition.no_title}"/>
</div>

</html>
