<!DOCTYPE html>
<html lang="en" class="govuk-template" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <th:block th:insert="fragments/layout :: head" th:with="pageTitle=|${model.project.getId()}: ${model.project.getName()} - ${model.organisationName}|" />
</head>

<body class="govuk-template__body">
<th:block th:insert="fragments/modals :: modal-overlay" />

<th:block th:insert="fragments/layout :: body-start" />
<th:block th:insert="fragments/layout :: global-header" />

<div class="govuk-width-container">
    <th:block th:insert="fragments/layout :: phase-banner" />
    <th:block th:insert="fragments/layout :: header-org"
              th:with="linkTitle=|Back to ${model.organisationName}|,
              linkUrl=@{/competition/{competitionId}/project/{projectId}/organisation/{organisationId}/details (competitionId=${model.project.getCompetition()}, projectId=${model.project.getId()}, organisationId=${model.organisationId})}" />

    <main class="govuk-main-wrapper" id="main-content" role="main">
        <div th:if="${#fields.hasErrors('${form.*}')}" class="govuk-error-summary" role="alert"
             aria-labelledby="error-summary-title" tabindex="-1" data-module="error-summary">
            <h2 class="govuk-error-summary__title"
                id="error-summary-title">We are unable to show the partner details</h2>
            <div class="govuk-error-summary__body">
                <ul class="govuk-list govuk-error-summary__list">
                    <li th:each="err : ${#fields.errors('${form.*}')}">
                        <a href="#select-partner-section" th:text="${err}">The error message</a>
                    </li>
                </ul>
            </div>
        </div>

        <th:block th:insert="fragments/layout :: page-title"
                  th:with="pageTitle=${model.organisationName},subTitle=|${model.project.getId()}: ${model.project.getName()}|,size='govuk-heading-xl'"/>

        <form th:object="${form}"
              th:action="@{${#ifsUtil.formPostUri(#httpServletRequest)}}"
              th:attr="data-autosave='autosaveFormPost'"
              enctype="multipart/form-data"
              novalidate="novalidate"
              method="POST">

            <th:block th:insert="application/sections/your-organisation/growth-table-fragments ::
                                    with-growth-table-project-setup(
                                           form=${form},
                                           organisationSizeOptions=${model.organisationSizeOptions},
                                           isH2020=${model.h2020},
                                           showOrganisationSizeAlert=${model.showOrganisationSizeAlert},
                                           showStateAidAgreement=${model.showStateAidAgreement},
                                           readOnly=${model.readOnly})"
                      data-switches-button-status="#save-and-return" />
            <div>
                <button type="submit"
                        class="govuk-!-margin-top-6 govuk-button"
                        id="save-and-return"
                        name="save-and-return"
                        data-js-modal="modal-edit-organisation-size"
                        th:href="@{/competition/{competitionId}/project/{projectId}/partner/{partnerId}/details (competitionId=${model.project.getCompetition()}, projectId=${model.project.getId()}, partnerId=${model.organisationId})}"
                        th:text="|Save and return to ${model.organisationName}|">Save and return to organisation</button>
                <th:block th:insert="fragments/modals :: modal-edit-organisation-size (${model})" />
            </div>
            <div>
                <a th:href="@{/competition/{competitionId}/project/{projectId}/organisation/{organisationId}/details (competitionId=${model.project.getCompetition()}, projectId=${model.project.getId()}, organisationId=${model.organisationId})}"
                   th:text="|Cancel and return to ${model.organisationName}|"
                   id="cancel-return-organisation-details"
                   class="button-clear">Cancel and return to organisation details
                </a>

            </div>
        </form>

        <th:block th:insert="fragments/layout :: main-content-end"/>
    </main>
</div>

<th:block th:insert="fragments/layout :: footer"/>
<th:block th:insert="fragments/layout :: body-end"/>
</body>
</html>
