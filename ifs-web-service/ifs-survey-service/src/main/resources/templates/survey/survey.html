<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <th:block th:insert="fragments/layout :: head" th:with="pageTitle='Satisfaction survey'" />
</head>
<body class="survey">

<th:block th:insert="fragments/layout :: body-start" />
<th:block th:insert="fragments/layout :: global-header"/>

<main tabindex="-1" id="content">

    <div th:if="${#fields.hasErrors('${form.*}')}" class="error-summary" role="alert" aria-labelledby="error-summary-heading" tabindex="-1">
        <h2 class="heading-medium error-summary-heading" id="error-summary-heading">There is a problem on this page.</h2>
        <th:block th:insert="fragments/elements :: error-summary-list(form)" />
    </div>

    <th:block th:insert="fragments/layout :: page-title" th:with="pageTitle='Satisfaction survey',size='heading-xlarge'" />

    <form th:action="@{/{competitionId}/feedback(competitionId=${competitionId})}" method="post" th:object="${form}" class="extra-margin" novalidate="novalidate">

        <legend class="heading-medium">
            Overall, how did you feel about the service you received today?
        </legend>
        <div class="form-group" th:classappend="${#fields.hasErrors('*{satisfaction}')} ? 'form-group-error'">
            <fieldset>
                <legend id="satisfaction">
                    <span class="visuallyhidden">Please select your satisfaction</span>
                    <th:block th:if="${#fields.hasErrors('*{satisfaction}')}">
                        <span class="error-message" th:each="err : ${#fields.errors('satisfaction')}" th:text="${err}"></span>
                    </th:block>
                </legend>
                <div class="multiple-choice" th:each="satisfaction : ${form.getSatisfactionList()}">
                    <input type="radio"
                           th:field="*{satisfaction}"
                           th:value="${satisfaction.id}"
                           th:id="'satisfaction-radio-'+${satisfaction.id}"
                           required="required"
                           th:attr="data-required-errormessage=#{validation.standard.satisfaction.selectionrequired}"/>
                    <label class="block-label selection-button-radio"
                           th:for="'satisfaction-radio-'+${satisfaction.id}"
                           th:text="${satisfaction.displayName}"></label>
                </div>
            </fieldset>
        </div>

        <legend class="heading-medium">
            How could we improve this service?
        </legend>

        <div th:id="comments">
            <div class="form-group" th:classappend="${#fields.hasErrors('comments')} ? 'form-group-error'">
                    <th:block th:if="${#fields.hasErrors('comments')}">
                        <span class="error-message"  th:each="err : ${#fields.errors('comments')}" th:text="${err}"></span>
                    </th:block>
                <div class="textarea-wrapped word-count">
                                <textarea
                                    class="form-control width-full"
                                    cols="30"
                                    rows="3"
                                    maxlength="5000"
                                    data-max_words="400"
                                    data-maxwordslength="400"
                                    data-maxwordslength-errormessage="Maximum word count exceeded. Please reduce your word count to 400."
                                    th:attr="data-maxlength-errormessage=#{validation.field.too.many.characters(null, 400)}"
                                    th:errorclass="field-error"
                                    th:field="*{comments}"></textarea>
                    <div class="textarea-footer" aria-live="polite" aria-atomic="true" role="status">
                        <th:block th:insert="question-type/form-elements :: form-word-count (maxWords=400, currentWordsLeft=${#ifsUtil.wordsRemaining(400, comments)})" />
                    </div>
                </div>
            </div>
        </div>

        <p>Please don't include any personal or financial information, for example your credit card numbers.</p>

        <button class="button button-large" type="submit">Send feedback</button>
    </form>

    <th:block th:insert="fragments/layout :: main-content-end" />
</main>

<th:block th:insert="fragments/layout :: footer" />
<th:block th:insert="fragments/layout :: body-end" />
</body>
</html>
