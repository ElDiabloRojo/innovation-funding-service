def targetBuildFile = project.hasProperty("profile") ? "${project.profile}-build.gradle" : "docker-build.gradle"
if (file(targetBuildFile).exists()) {
    apply from: targetBuildFile
}

apply from: rootProject.file("gradle-support/java-spring-boot.gradle")
apply from: rootProject.file("gradle-support/mapstruct.gradle")

bootJar.enabled=false
jar.enabled=true

configurations {
    testArtifacts
}
task testJar(type: Jar) {
    baseName = "${project.name}-test"
    from sourceSets.test.output
}
artifacts {
    testArtifacts testJar
}


dependencies {
    compile project(":ifs-resources")
    compile project(":ifs-security")


    compile "org.springframework.boot:spring-boot-starter-data-jpa"
    compile "org.apache.tika:tika-parsers:1.14"
    compile "org.apache.httpcomponents:httpasyncclient"

    testCompile project(path: ":ifs-resources", configuration: 'testArtifacts')
    testCompile project(path: ":ifs-commons", configuration: 'testArtifacts')
    testCompile project(path: ":ifs-security", configuration: 'testArtifacts')

    testCompile 'org.springframework.restdocs:spring-restdocs-mockmvc'
    testCompile "net.sf.opencsv:opencsv:2.3"

}

